<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tmount.db.mileage.dao.ZdcGpsinfoMapper">
	<resultMap id="BaseResultMap" type="com.tmount.db.mileage.dto.ZdcGpsinfo">
		<id column="id" property="id" jdbcType="BIGINT" />
		<result column="deviceuid" property="deviceuid" jdbcType="VARCHAR" />
		<result column="gpstime" property="gpstime" jdbcType="VARCHAR" />
		<result column="latitude" property="latitude" jdbcType="DECIMAL" />
		<result column="longitude" property="longitude" jdbcType="DECIMAL" />
		<result column="height" property="height" jdbcType="DECIMAL" />
		<result column="speed" property="speed" jdbcType="DECIMAL" />
		<result column="acceleration" property="acceleration" jdbcType="DECIMAL" />
		<result column="direction" property="direction" jdbcType="DECIMAL" />
		<result column="locatenetworktypeid" property="locatenetworktypeid"
			jdbcType="DECIMAL" />
		<result column="deviecetimezone" property="deviecetimezone"
			jdbcType="VARCHAR" />
		<result column="gpstimeindefaulttimezone" property="gpstimeindefaulttimezone"
			jdbcType="VARCHAR" />
		<result column="gpslocatestatus" property="gpslocatestatus"
			jdbcType="INTEGER" />
		<result column="hdop" property="hdop" jdbcType="DECIMAL" />
		<result column="satellitecount" property="satellitecount"
			jdbcType="INTEGER" />
	</resultMap>
	<sql id="Base_Column_List">
		id,deviceuid,gpstime,latitude,longitude,height,speed,acceleration,direction,locatenetworktypeid,deviecetimezone,gpstimeindefaulttimezone,gpslocatestatus,hdop,satellitecount
	</sql>

	<sql id="Column_List">
		latitude,longitude
	</sql>

	<insert id="insert" parameterType="com.tmount.db.mileage.dto.ZdcGpsinfo">
		insert into t_zdc_gpsinfo (
		deviceuid,gpstime,latitude,longitude,height,speed,direction,hdop)
		values (
		#{deviceuid,jdbcType=VARCHAR},#{gpstime,jdbcType=VARCHAR},
		#{latitude,jdbcType=DECIMAL},#{longitude,jdbcType=DECIMAL},#{height,jdbcType=DECIMAL},
		#{speed,jdbcType=DECIMAL},#{direction,jdbcType=DECIMAL},#{hdop,jdbcType=DECIMAL}
		)
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.tmount.db.mileage.dto.ZdcGpsinfo">
		update t_zdc_gpsinfo
		<set>
			<if test="id != null">
				id = #{id,jdbcType=BIGINT},
			</if>
			<if test="deviceuid != null">
				deviceuid = #{deviceuid,jdbcType=VARCHAR},
			</if>
			<if test="gpstime != null">
				gpstime = #{gpstime,jdbcType=VARCHAR},
			</if>
			<if test="latitude != null">
				latitude = #{latitude,jdbcType=DECIMAL},
			</if>
			<if test="longitude != null">
				longitude = #{longitude,jdbcType=DECIMAL},
			</if>
			<if test="height != null">
				height = #{height,jdbcType=DECIMAL},
			</if>
			<if test="speed != null">
				speed = #{speed,jdbcType=DECIMAL},
			</if>
			<if test="acceleration != null">
				acceleration = #{acceleration,jdbcType=DECIMAL},
			</if>
			<if test="direction != null">
				direction = #{direction,jdbcType=DECIMAL},
			</if>
			<if test="locatenetworktypeid != null">
				locatenetworktypeid =
				#{locatenetworktypeid,jdbcType=DECIMAL},
			</if>
			<if test="deviecetimezone != null">
				deviecetimezone = #{deviecetimezone,jdbcType=VARCHAR},
			</if>
			<if test="gpstimeindefaulttimezone != null">
				gpstimeindefaulttimezone =
				#{gpstimeindefaulttimezone,jdbcType=VARCHAR},
			</if>
			<if test="gpslocatestatus != null">
				gpslocatestatus = #{gpslocatestatus,jdbcType=INTEGER},
			</if>
			<if test="hdop != null">
				hdop = #{hdop,jdbcType=DECIMAL},
			</if>
			<if test="satellitecount != null">
				satellitecount = #{satellitecount,jdbcType=INTEGER}
			</if>
		</set>
		where id = #{id,jdbcType=BIGINT}
	</update>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		delete from
		t_zdc_gpsinfo
		where id = #{id,jdbcType=BIGINT}
	</delete>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Long">
		select
		<include refid="Base_Column_List" />
		from t_zdc_gpsinfo
		where id = #{id,jdbcType=BIGINT}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from t_zdc_gpsinfo
	</select>

	<select id="selectGpsInfoByMile" resultMap="BaseResultMap"
		parameterType="com.tmount.db.mileage.dto.ZdcMileage">
		select Latitude,Longitude from t_zdc_gpsinfo where GPSTime &lt; #{datastreamid15} and DeviceUID = #{deviceuid} order by GPSTime
	</select>
	
	<select id="selectGpsInfoByMileRange" resultMap="BaseResultMap"
		parameterType="com.tmount.db.mileage.dto.ZdcMileage">
		select DISTINCT  Latitude,Longitude ,GPSTime from t_zdc_gpsinfo where DeviceUID = #{deviceuid} and GPSTime between #{datastreamid14} and #{datastreamid15} AND Latitude!=0  ORDER BY gpstime ASC

	</select>
	

	<select id="selectGpsInfoByMileList" parameterType="java.util.List">
		<foreach collection="list" item="items" index="index" separator=",">
			select <include refid="Column_List" /> from t_zdc_gpsinfo where DeviceUID =#{items.deviceuid} and GPSTime &lt; #{items.datastreamid15}
		</foreach>
	</select>
 
 	<select id="selectGpsInfoByMileListRange" parameterType="java.util.List">
		<foreach collection="list" item="items" index="index" separator=",">
			select <include refid="Column_List" /> from t_zdc_gpsinfo where DeviceUID =#{items.deviceuid} and GPSTime between #{datastreamid14} and #{items.datastreamid15}  
		</foreach>
	</select>
	
	<select id="selectNew" resultMap="BaseResultMap" parameterType="java.lang.String">
		select <include refid="Base_Column_List" /> from t_zdc_gpsinfo where deviceuid = #{deviceuid} order by gpstime desc limit 1
	</select>
	
	
	
	<!-- 得到有GPS数据的时日期-->
   <select id="selectDaysofGPS" resultMap="BaseResultMap"  parameterType="com.tmount.db.mileage.dto.ZdcGpsinfo">
      	SELECT DISTINCT DATE(gpstime) gpstime  FROM t_zdc_gpsinfo   WHERE deviceuid=#{deviceuid}
     	ORDER BY DATE(gpstime)  DESC 	 LIMIT
		#{startLimit,jdbcType=INTEGER},#{pageSize,jdbcType=INTEGER}
  </select>
	
</mapper>
