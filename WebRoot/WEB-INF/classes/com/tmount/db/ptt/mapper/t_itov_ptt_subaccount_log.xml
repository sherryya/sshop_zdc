<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tmount.db.ptt.dao.PttSubaccountLogMapper">
	<insert id="insert" parameterType="com.tmount.db.ptt.dto.TItovPttSubaccountLog">
		insert into
		t_itov_ptt_subaccount_log (
		type,orderid,subid,caller,called,callsid)
		values (
		#{type,jdbcType=INTEGER},#{orderid,jdbcType=VARCHAR},
		#{subid,jdbcType=VARCHAR},#{caller,jdbcType=VARCHAR},#{called,jdbcType=VARCHAR},#{callsid,jdbcType=VARCHAR}
		)
	</insert>
	<insert id="insertAll" parameterType="com.tmount.db.ptt.dto.TItovPttSubaccountLog">
		INSERT INTO
		t_itov_ptt_subaccount_log (
		TYPE,orderid,subid,caller,called,callsid,byetype,starttime,endtime,billdata,recordurl,subtype)
		VALUES (
		#{type,jdbcType=INTEGER},#{orderid,jdbcType=VARCHAR},
		#{subid,jdbcType=VARCHAR},#{caller,jdbcType=VARCHAR},#{called,jdbcType=VARCHAR},#{callsid,jdbcType=VARCHAR},
		#{byetype,jdbcType=VARCHAR},#{starttime,jdbcType=VARCHAR},#{endtime,jdbcType=VARCHAR},#{billdata,jdbcType=VARCHAR}
		,#{recordurl,jdbcType=VARCHAR},#{subtype,jdbcType=VARCHAR}
		)
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.tmount.db.ptt.dto.TItovPttSubaccountLog">
		update t_itov_ptt_subaccount_log
		<set>
			<if test="byetype != null">
				byetype = #{byetype,jdbcType=VARCHAR},
			</if>
			<if test="starttime != null">
				starttime = #{starttime,jdbcType=VARCHAR},
			</if>
			<if test="endtime != null">
				endtime = #{endtime,jdbcType=VARCHAR},
			</if>
			<if test="billdata != null">
				billdata = #{billdata,jdbcType=VARCHAR},
			</if>

			<if test="recordurl != null">
				recordurl = #{recordurl,jdbcType=VARCHAR},
			</if>
			<if test="subtype != null">
				subtype = #{subtype,jdbcType=VARCHAR}
			</if>
		</set>
		where orderid = #{orderid,jdbcType=VARCHAR}
	</update>


	<select id="selectRadiobyAccount" resultType="com.tmount.db.ptt.dto.TItovPttSubaccountLog">
		SELECT per.* FROM t_itov_ptt_subaccount t ,t_itov_ptt_subaccount_log per
		WHERE t.voipAccount = per.called AND t.account_id = #{0} LIMIT  #{1},#{2}
	</select>
  
</mapper>
